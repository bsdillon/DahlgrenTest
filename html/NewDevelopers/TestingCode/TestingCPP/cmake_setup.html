<!DOCTYPE html>
<html>
  <head>
    <title>Create a Python Pytest</title>
    <link rel="stylesheet" type="text/css" href="../../../common.css">
    <style>
    </style>
    <script>
    </script>
  </head>
  <body>
    <h3>Creating the CMake Files for Testing</h3>
    <ul>
      <li>CMake manages the build process of C/C++ code and makes it so that you do not have to make 
        make files manually. It supports multiple libraries and works across multiple platforms.
        Generally, it seems that you will need a CMakeLists.txt file in each file that contains code.
        This will cover the minimum that is needed to build and test code, as it can become quite complex.
      </li>
      <li>One C/C++ testing framework is Google Test, known as GTest. GTest seems to be one of the most
        common testing frameworks and there are a couple repositories that use it along with CMake and 
        GitHub Actions like we are. If you want to check out one of these projects, ASSIMP is the one that
        we found first and served as the basis for our GitHub Workflow.
      </li>
      <li>When creating the CMakeLists.txt files, we want one in the base of our project, and in each 
        supporting directory. For example we have the CMakeLists.txt files in base of the project DahlgrenTest,
        in the file src where the .cpp and .h files are, and in the tst file, which contains the GTest .cpp's.
        Theoretically if you were to seperate .cpp and .h files, you would have to make a cmake file for each 
        of those.
      </li>
      <li>Now, that we understand how we can structure the CMakeLists.txt files, we can go onto what is in them.
        This is the CMakeLists.txt that in the base of the DahlgrenTest repo. Here are brief explanations of what
        each command does. I am not sure if the '//' is correct syntax for comments in these files, but I thought I'd 
        do something to differentiate between commands and comments.
        <ul>cmake_minimum_required(VERSION 3.10)<br>
          //Defines the minimum version of CMake to use<br><br>
          project(C++ Tests)<br>
          //Names the current project<br><br>
          set(CMAKE_CXX_STANDARD 11)<br>
          //Sets the version of C/C++ to use (use CC for versions of C)<br><br>
          include_directories(src)<br>
          //Add the given directories to those the compiler uses to search for include files.<br><br>
          add_subdirectory(src)<br>
          add_subdirectory(tst)<br>
          add_subdirectory(lib/googletest)<br>
          //Add a subdirectory to the build. The source_dir specifies the directory in which the source 
            CMakeLists.txt and code files are located.
        </ul>
      </li>
      <li>Next, we can look at what one of the CMakeLists.txt's looks like in one of the subdirectories.
        Here is the CMakeLists.txt from the src file in the DahlgrenTest.
        <ul>set(BINARY ${CMAKE_PROJECT_NAME})
          //this sets "BINARY" to be equal to the project name<br><br>
          file(GLOB_RECURSE SOURCES LIST_DIRECTORIES true *.h *.cpp)
          //Grabs files with .h and .cpp extensions to be used as sources<br><br>
          set(SOURCES ${SOURCES})
          //sets those sources as the variable<br><br>
          add_executable(${BINARY}_run ${SOURCES})
          //creates an executable that allows for the running of the code.(think like using './""' in linux)<br><br>
          add_library(${BINARY}_lib STATIC ${SOURCES})
          //Adds a folder with the created files.
        </ul>
    </ul>
  </body>
</html>