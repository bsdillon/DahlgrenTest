<!DOCTYPE html>
<html>
<head>
    <title>Azure Virtual Machine Configuration</title>
    <link rel="stylesheet" type="text/css" href="../common.css">
</head>
<body>
<h3>Logging onto Azure</h3>
<p> Go to this link: <a href = "https://portal.azure.com/#home">Azure Home</a>.
    If you are working on NMCI, you may have to open an inPrivate window so that it allows you to chose which account to sign in with.
</p>
<img src="../imgs/azureDocs/AzureLogin.png" alt = "Login Page">
<p> Log on with your temporary password, then follow prompting to create a new one </p>
<h3>Creating Your Virtual Machine</h3>
<p>On the home page, click on the "Virtual Machines" Icon, then click on the plus button on the left side of the page and select "Create New Machine"</p>
<img src = "../imgs/azureDocs/vmButton.png" alt = "VM Button">
<img src = "../imgs/azureDocs/createButton.png" alt = "Create VM Button">
<p>For much of the VM configuration, the default options are correct. The following settings need to be set correctly: </p>
<ul>
<li>Resource Group: 'Admins-Group-1' should be selected as the resource group
    <img src = "../imgs/azureDocs/resourceGroup.png" alt="Resource Group Selection">
</li>

<li>Image: Ubuntu Server 20.04 LTS - Gen 1
    <img src = "../imgs/azureDocs/imageUbuntu.png" alt="Image Selection">
</li>
<li>Size: Standard_B4ms - 4 vcpus, 16 GiB memory($121.8/month)
    <img src = "../imgs/azureDocs/sizeB4.png" alt="Size Selection">
</li>

<li>Authentication Type: SSH public key
    <img src = "../imgs/azureDocs/keySelection.png" alt="Key Selection">
</li>

<li>Inbound Port Rules: Allow SSH 22
    <img src = "../imgs/azureDocs/inboundPort.png" alt= "Port Rules">
</li>
<li>Networking/ Virtual Network: Admins-Group-1-vnet
    <img src = "..imgs/azureDocs/virtualNetwork.png" alt="Network Selection">
</li>
<li>Management: Enable Auto-Shutdown <br> Set time to two hours after when you normally stop working.
    <img src = "../imgs/azureDocs/autoTime.png" alt="Time Selection">
</li>
</ul>
<br>
<p>At the end, enter your email/phone, and click "Create". It may take a couple of minutes for your machine to deploy.</p>
<h3>Connecting to Your Virtual Machine</h3>
<p>To connect to your virtual machine's user interface, you're going to have to first connect to its command line via SSH, then install
    a desktop package that will allow you to see the Virtual Machine. After that, you can use RDP and your machine's ip address to open it.
</p>
<p>Follow the instructions below using the command line and the key you downloaded while creating your VM.</p>
<img src="../imgs/azureDocs/sshDoc.png" alt = "SSH Connection Page">
<p>You should now be connected to the command line interface of your virtual machine, and see something like the image below.</p>
<img src = "../imgs/azureDocs/sshConnect.png" alt ="Successful Connection">
<p>Before installing anything onto your VM, you need to make sure you have Azure CLI installed. Follow the instructions <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli">here</a> to install and log on using the command below.</p>
<img src="../imgs/azureDocs/azCommand.png" alt="Az Login">
<p>Microsoft has good documentation on installing the desktop here: <a href = "https://docs.microsoft.com/en-us/azure/virtual-machines/linux/use-remote-desktop">Using RDP with Linux VM</a></p>
<p>Remote Desktop Connection should be automatically set up if you have a Windows operating system, but if it isn't it can be configured using <a href="https://support.microsoft.com/en-us/windows/how-to-use-remote-desktop-5fe128d5-8fb1-7a23-3b8a-41e636865e8c">these instructions.</a></p>
<p>Enter the IP address of your VM, log on with the credentials you created, and you should end up with the screen below</p>
<img src="../imgs/azureDocs/vmDesktop.png" alt="VM Desktop">
<br>
<p>After setting up the machine and installing the desktop, only the last step will be necessary to connect to your VM in the future.</p>
</body>
</html>
