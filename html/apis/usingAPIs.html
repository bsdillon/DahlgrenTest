<html>
  <head>
    <style>
      body {width:650px; background-color: #E6E6E6; text-align: justify; text-justify: inter-word;}
      img {border: solid black 2px; max-width:600px; display: block; margin-left: auto; margin-right: auto;}
      code {color: navy; font-style: italic; font-weight: bold; background-color: #ddf;}
      .red {color: red;}
      .code {background-color: #ddf;}
      h2{border: solid blue; border-width:2px 0px 2px 0px; background-color:white; text-align:center; font-variant: small-caps; text-transform: capitalize;}
      h3{border: solid blue; border-width:2px 0px 2px 0px; background-color:white; text-align:center; font-variant: small-caps; text-transform: capitalize;}
    </style>
    <script>
      function newJoke()
      {
        var request = new XMLHttpRequest();
        //request.open("GET","https://api.onwater.io/api/v1/results/37,-20?access_token=xmonMPhLHvsRgMBxeNiH");
        request.open("GET","https://official-joke-api.appspot.com/random_joke");
        request.onload = () => {
          var ans = JSON.parse(request.response);
          var s = ans.setup + ". . .";
          s += ans.punchline;
          joke.innerHTML=s;
        }
        request.send();
        jbutton.innerHTML="Tell me another!";
      }
    </script>
  </head>
  <body>
    <h2>Table of Contents</h2>
    <ul>
      <li><a href="#wiaa">What is an API?</a></li>
      <li><a href="#wir">What is REST?</a></li>
      <li><a href="#wij">What is JSON?</a></li>
      <li><a href="#naac">Non-Authoritative API Calls</a></li>
      <li><a href="#aac">Authoritative API Calls</a></li>
      <li><a href="#rd">Reading Documentation</a></li>
      <li><a href="#ahe">An HTML Example</a></li>
      <li><a href="#uaisa">Using APIs in School Assignments</a></li>
    </ul>
   <a name="wiaa"> <h2>What is an API?</h2>
    <p>
      In programming, software can be written to allow other software to work with it. When any two software programs join, 
      it is called an interface. The software being used is referred to as a service; the software using the service is called an
      application. If Alicia writes a useful service, Juaquin can use that service as part of his application. Alicia wants to 
      have her service used, but she doesn't want to have many people, like Juaquin, asking her to work with them. Instead, 
      Alicia needs to communicate to any future developer how to program his own application to interface with her service. 
      Thus an API is an application programming interface and it tells people like Juaquin how to work with some service.
    </p>

    <p>
      The API is based on calls from the application to the service. The application says, "Excuse me service. Do you have an
      A?" The service receives the call, finds the A and replies. "Sure, application. I have an A." APIs define the language of these
      exchanges. It reads something like a form with blanks that need to be filled in.<br>
      My name is <u>&nbsp;<I>Steve</i>&nbsp;</u> and I would like to have a/an <u>&nbsp;<I>Cherry Pepsi</i>&nbsp;</u>.<br>
      Dear <u>&nbsp;<I>Steve</i>&nbsp;</u> I <strike>do</strike> / don't have a/an <u>&nbsp;<I>Cherry Pepsi</i>&nbsp;</u>.
    </p>
    <img src="./apiicon.png">

    <a name="wir"><h2>What is REST?</h2>
    <p>
      REST is a particular type of API. It has information that will be transferred from the application to the service. That 
      information is represented in a series of specific state-value pairs. For example, a RESTful API requesting weather from
      last week would want the state <span class="code">date</span> to be for last week. This is important because no 
      service wants to remember the state from many applications that may be accessing the service. It is up to the application
      to use the RESTful API to <b class="red">RE</b>present the <b class="red">S</b>tate and <b class="red">T</b>ransfer
      it to the service. <b class="red">REST</b>ful APIs use these four calls:
    </p>

    <dl>
      <dt>POST</dt><dd>New information is POSTed to the service. For example, I want to make a new order on Amazon, so we are creating a new order.</dd>
      <dt>GET</dt><dd>Information already at the service is subject to a GET request. For example, I go back to Amazon a week later and ask to pull up the order I prepared last week.<br><br>
      Importantly, any information available from the service can be called by a GET even if the application didn't POST the information there. What time is it? What country has the most artichokes? The API will define what GET requests are legal.</dd>
      <dt>PUT</dt><dd>If the information is wrong or outdated, new data can be PUT into its place. Maybe I change my mind about the quantity of my order or want to add new things.</dd>
      <dt>DELETE</dt><dd>Sometimes the information must be DELETEd. In this case, I decide to cancel my order instead of completing it.</dd>
    </dl>
    <img src="./resticon.png">

    <a name="wij"><h2>What is JSON?</h2>
    <p>
      JSON is a way to package information for it to be sent over the internet. The JavaScript language is used in almost every 
      web-based application. Within JavaScript, groups of data are bundled together in objects. Objects can also be bundled
      together into other objects like babushka dolls (sometimes called nested Russian dolls). One example might be data about
      a student. Each student has a first name, last name, and a class grade. Then all the students can be bundled together into
      a description of the class. All of this information is reduced to a few leters and numbers, packaged into quotes, commas,
      and curly braces. This is the dense, compacted, form of data. This is the tightly bound chromosome, not the loosely flowing 
      DNA strand. It can still be read by humans, but it lacks all the verbs, articles, adjectives, adverbs, etc. With some practice
      you can read this, but who wants to. This is meant to be used to communicate between computers.
    </p>
    <img src="./jsonobject.png">

    <a name="naac"><h2>Non-authoritative API calls</h2>
    <p>
      Some services provide public APIs to anyone who wants to use them. These API calls do not require any kind of authority,
      license, or payment. The call can be made by anyone and often written right into the URL line of your browser. One of these
      APIs somes from <span class="code">https://official-joke-api.appspot.com/</span>. When your browser goes to this site
      the API randomly selects a joke and returns the answer in a JSON message. This isn't particularly readable to a human, but
      the same response could be rolled into a simple HTML page to show the result in a more readable way. This button below
      calls the random joke API. You can see a live update!
    </p>

   <p>Whant to hear a Joke?<br><button id="jbutton" onclick="newJoke()">Yes</button><br><span class="red" id="joke"></span></p>

    <img src="./unauthorized.png">

    <a name="aac"><h2>Authoritative API calls</h2>
    <p>
      Some services provide paid APIs, track the number of API calls you make, and may want to prevent any random person from
      using the service. The best way to manage this is by supplying users with the authority to access the API and blocking everyone
      else. The service provider can generate a key that will be used in the API call and will identify the authorized user. If there is a
      fee for the use of the service, the service provider will record the use and charge accordingly. Some APIs will track the number
      of uses and limit them per month, per day, or even per minute. Remember that while a human might have trouble calling the same 
      API more than 20 times per minute (just 3 seconds each) a computer can do the same thing millions of times. Limiting the API
      calls in this way prevents someone from programming an application to severely abuse the API.
    </p>

    <p>
      Authorized user keys are long, random-looking strings of characters. wqenvqor423fg3lk321lkjsdf04fs3 is a pretty good example. 
      The service provider can randomly select 30 characters and check to see if its already in use. If the key is already used, they just 
      try to create a new key. Finding an already-in-use key is rare. If you think about it, that key has 30 characters and there are 36 
      choices (26 letters + 10 digits) for each character. That means that there are about 49,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000.
      That is enough different combinations to give 3700 trillion addresses to each atom of the Earth. Believe me when I say it is rare.
      The same rarity also makes it hard to guess a valid key so the service provider is safe from random people trying to use the API.
    </p>

    <a name="rd"><h2>Reading Documentation</h2>
    <p>
      Each API should have documentation that explains how to use it. Some APIs do a better job with documentation. Some do not.
      Generally, you are looking for three things:
    </p>
    <dl>
      <dt>WHAT you can do</dt><dd>As an example, the BoredAPI indicates that you can GET a random activity or a specific activity using its unique number<br>
      <ul>
        <li><span class="red">RANDOM ACTIVITY</span> http://www.boredapi.com/api/activity/ </li>
        <li><span class="red">SPECIFIC ACTIVITY</span> http://www.boredapi.com/api/activity?key=5881028</li>
      </ul>
      </dd>
      <dt>HOW to do it</dt><dd>In this example, you can ask for a specific activity by adding a <span class="code">key</span> state to the RESTfull API call.<br>
      <ul>
        <li>http://www.boredapi.com/api/activity<span class="red">?key=5881028</span></li>
      </ul>
      </dd>
      <dt>WHAT are the options</dt><dd>In the same API documentation, another example shows that there is a <span class="code">type</span> state for the activity.
        This is a great example of the variable quality of documentation. The example from the documentation shows how to specify the type of the activity, but it doesn't
        indicate all of the options. Elsewhere in the example documentation I can see <span class="code">'education'</span>, <span class="code">'social'</span>, 
        <span class="code">'relaxation'</span>, and <span class="code">'cooking'</span>. I don't know if those are all the options, but at least I know what some of
        them are.
      <ul>
        <li>http://www.boredapi.com/api/activity<span class="red">?type=recreational</span></li>
      </ul>
      </dd>
    </dl>

    <a name="ahe"><h2>An HTML Example</h2>
    <p>
      The code below was used in an authorized API call. To see a similar call in action, you can right click on this page
      and select <span class="code">View Source</span>. The code below creates a very simple HTML page that calls the 
      onwater.io API, a service the determines if a specific position on the earth is actually on the ocean &#128516;. On
      line 5 you can see this is a GET call. On line 6 <span class="code">access_token</span> indicates that this call is 
      authoritative. Lines 7 through 13 setup a callback function. When the API returns a result, that code will run. On line
      14 the request is finally sent.
    </p>

    <div class="code">
    <code>
1  &lt;html&gt;<br>
2  &nbsp;&nbsp;&lt;head&gt;<br>
3 &nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;<br>
4 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var request = new XMLHttpRequest();<br>
5 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request.open("GET", <br>
6 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"https://api.onwater.io/api/v1/results/37,-20?access_token=abcdefghijkl");<br>
7 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request.onload = () => {<br>
8 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var tmp = JSON.parse(request.response);<br>
9 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var s = "Lat: " + tmp.lat + "&lt;br&gt;";<br>
10 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s += "Lon: " + tmp.lon + "&lt;br&gt;";<br>
11 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s += "Is on water: " + tmp.water;<br>
12 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output.innerHTML=s;<br>
13 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
14 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request.send();<br>
15 &nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;<br>
16 &nbsp;&nbsp;&lt;/head&gt;<br>
17 &nbsp;&nbsp;&lt;body&gt;<br>
18 &nbsp;&nbsp;&nbsp;&nbsp;&lt;p id="output"&gt;&lt;/p&gt;<br>
19 &nbsp;&nbsp;&lt;/body&gt;<br>
20 &lt;/html&gt;      
    </code>
    </div>
    <br>
    <p>
      The callback function uses the JSON.parse function on line 8 to read the incoming response. As discussed above, JSON 
      was originally based on JavaScript objects. The JSON.parse function turns the human-readable text back into an object
      On lines 9 through 11, the tmp object is used to get the latitude, longitude, and water/land status. If you don't exactly 
      understand the code on these lines, you could simply write <span class="code">output.innerHTML = request.response</span>
      on line 12 and remove lines 8 through 11. That will print the raw JSON object just as shown in the picture below.
    </p>
    <img src="./apijsonparse.png">

    <a name="uaisa"><h2>Using APIs In School Assignments</h2>
    <p>
      There are anumber of APIs that may lend themselves to useful school assignments. A large list can be found at
      <a href="https://github.com/public-apis/public-apis">GitHub</a>. <span class="red">WARNING:</span> Some of
      these APIs access jokes and other material that is not appropriate for children. Treat any API as you would a book
      or YouTube&trade; video being assigned to your students for an assigment. Caution is recommended. The examples
      below, however, have been checked and should be free from any concern.
    </p>
    <dl>
      <dt><a href="https://nationalize.io/">Name APIs</a></dt><dd>This API actual has three features, allowing students to research data-driven relationships between a first name and the likely gender, age, and nationality of the owner. Some of the predictions are wildly wrong and this is to be expected, but the service can be easily accessed from a web browser as a first foray into the world of APIs and services.</dd>
      <dt><a href="https://www.boredapi.com/">BoredAPI</a></dt><dd>Bored API can suggest activities to do when one is bored. A grade school teacher may use the API to suggest fun activities that can be done in the classroom and especially in lieu of recess on a rainy day. The API offers some state-base options to specify activities with zero cost, indoors, charitable, etc. Again, nothing earth shattering, but teachers can introduce the friendly computer that they are talking to through the API.</dd>
      <dt><a href="https://dictionaryapi.com/products/index">Dictionaries</a></dt><dd>Rather than expecting a student to have a dictionary or thesarus at home or in the classroom, the teacher can encourage students to "look it up" using this API. There is even a Spanish-English dictionary. This service is authoritative, so you can request a key for your class. <span class="red">WARNING:</span> the service is free for up to 1000 queries a day. If a student maliciously set a program to make millions of queries it will rack up charges. As of this writing, it is not know if you can enforce the free per-day limit of 1000 searches. It may also be possible to review the searches that were made using your key so that you can review some of the words in class with your students. It may even be possible to request the students submit words to the service as part of an assignment.</dd>
      <dt><a href="http://deckofcardsapi.com/">Cards</a></dt><dd>This service allows the user to create a deck, deal cards, put them in piles, and shuffle them all again. It also has images that can be used. It would be relatively simple for a student to use this API to manage cards to create a simple card guessing game. This may be a topic for more advanced students who really are interested in programming, but the API and images are accessible from the browser.</dd>
      <dt><a href="https://official-joke-api.appspot.com/random_joke">Joke</a></dt><dd>This random joke service is the one used above and appears to be entirely safe even for grade school students.</dd>
      <dt><a href="https://opentdb.com/api_config.php">Trivia</a></dt><dd>This service generates multiple choice or True/False trivia questions from a variety of knowledge areas. It also identifies the right answer. It may form the basis of a fun activity centered on the use of the API or for advanced students to program a simple game depending on the service.</dd>
      <dt><a href="https://restcountries.eu/">Countries</a></dt><dd>This API returns data about countries, including multiple language sources. It may be part of any assignment that requires the students to investigate or report on a foreign nation. Possibly it could be used to start of a fictional story by selecting a nation and learning more from it. Again, the API isn't earth shattering, but it could feature as part of an important assignment.</dd>
      <dt><a href="https://datausa.io/about/api/">US Data</a></dt><dd>This is another API with data exclusively from the USA. As with the previous API, it may feature as part of an assignment. The data source appears to be from the US government itself and includes a variety of statistics.</dd>
      <dt><a href="https://api.data.gov/">US Data#2</a></dt><dd>This is a second API that accesses official US data.</dd>
      <dt><a href="https://developer.usajobs.gov/Tutorials/Code-List">USA Jobs</a></dt><dd>This is a job search site updated by the US government. The API would allow a user to search for job data.</dd>
      <dt><a href="https://api.adviceslip.com/">Free advice</a></dt><dd>It's worth what you pay for it. This API would make a splendid addition to a personal blog or website.</dd>
      <dt><a href="https://onwater.io/">On Water</a></dt><dd>As shown above, the API only returns a true/false value indicating if the lat/lon location is on land or water. This isn't extremely valuable in and of itself, but it can be used as a data point to make other decisions. This is an authoritative service and is limited to 15 calls per minute.</dd>
    </dl>
  </body>
</html>      
