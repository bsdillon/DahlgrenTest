---
name: YML Change Report
# Rules for yaml Lint
# https://yamllint.readthedocs.io/en/stable/rules.html

# fix truthy warning per
# https://github.com/adrienverge/yamllint/issues/158#issuecomment-586706596
# yamllint disable-line rule:truthy
on:
  push:
    paths:
      - ".github/workflows/**.yml"

jobs:
  FindChangedFiles:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - name: List all files
        run: |
          curl --request GET \
          --url https://api.github.com/repos/${{ github.repository }}/commits?path=${{ github.repository }}%2.github%2workflows | \
              jq -r '.[0].commit.committer.date'
          --header 'authorization: Bearer ${{ secrets.GITHUB_TOKEN }}' \
          --header 'content-type: application/json' > yml_change.json
      - name: Keep file listing artifact
        uses: actions/upload-artifact@v1
        with:
          name: file_list
          path: yml_change.json